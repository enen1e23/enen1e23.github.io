<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <title>è¥¿å®‰å¸‚å¤æ ‘åæœ¨äº’åŠ¨åœ°å›¾</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Leaflet æ ·å¼ -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: "Microsoft YaHei", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f6f4f1;
    }
    .layout {
      display: flex;
      height: 100vh;
      overflow: hidden;
    }
    .sidebar {
      width: 340px;
      max-width: 100%;
      box-sizing: border-box;
      padding: 16px 18px;
      background: #f9f6f1;
      border-right: 1px solid #e0d6c8;
      display: flex;
      flex-direction: column;
      gap: 12px;
      overflow-y: auto;
    }
    .sidebar h1 {
      font-size: 20px;
      margin: 0 0 6px;
      font-weight: 600;
      color: #5a3d32;
    }
    .sidebar h2 {
      font-size: 14px;
      margin: 12px 0 4px;
      font-weight: 600;
      color: #5a3d32;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .sidebar p {
      margin: 0;
      font-size: 12px;
      color: #666;
      line-height: 1.6;
    }
    .tag {
      display: inline-block;
      font-size: 11px;
      padding: 2px 6px;
      border-radius: 10px;
      background: #e7d6c6;
      color: #5a3d32;
      margin-right: 4px;
    }
    #map {
      flex: 1;
      height: 100vh;
    }

    input[type="text"],
    input[type="range"],
    select {
      font-family: inherit;
    }

    #searchBox {
      width: 100%;
      padding: 6px 8px;
      border-radius: 4px;
      border: 1px solid #d0c4b3;
      font-size: 12px;
      box-sizing: border-box;
      outline: none;
    }
    #searchBox:focus {
      border-color: #7aa28f;
      box-shadow: 0 0 0 1px rgba(122,162,143,0.25);
    }

    .small-text {
      font-size: 11px;
      color: #777;
    }

    /* æ—¶é—´è½´æŒ‰é’® */
    #timeline {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      margin-top: 4px;
    }
    .timeline-btn {
      padding: 3px 8px;
      background: #eee3da;
      border-radius: 999px;
      font-size: 11px;
      cursor: pointer;
      border: 1px solid transparent;
      user-select: none;
    }
    .timeline-btn:hover {
      background: #e0d0c2;
    }
    .timeline-btn.active {
      background: #7aa28f;
      color: #fff;
      border-color: #5d8572;
    }

    /* ç»Ÿè®¡å›¾å®¹å™¨ */
    .chart-card {
      background: #fff;
      border-radius: 8px;
      padding: 8px 10px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.06);
      border: 1px solid #e5ddd2;
      max-width: 350px;  /* é™åˆ¶æœ€å¤§å®½åº¦ */
      max-height: 300px; /* é™åˆ¶æœ€å¤§é«˜åº¦ */
      overflow: hidden;  /* é˜²æ­¢æº¢å‡º */
      margin: 0 auto;    /* å±…ä¸­æ˜¾ç¤º */
    }

    .legend {
      font-size: 11px;
      color: #666;
      margin-top: 4px;
    }

    .footer-note {
      margin-top: 8px;
      font-size: 11px;
      color: #a18c7a;
    }

    /* Leaflet infoWindow é»˜è®¤å­—ä½“å˜å°ä¸€ç‚¹ */
    .leaflet-popup-content {
      font-size: 12px;
      line-height: 1.5;
    }
    .leaflet-popup-content b {
      font-size: 13px;
    }

    /* å›¾è¡¨çš„å®¹å™¨å°ºå¯¸ */
    #speciesChart {
      height: 120px; /* è°ƒæ•´å›¾è¡¨é«˜åº¦ */
      width: 250px;   /* è°ƒæ•´å›¾è¡¨å®½åº¦ */
    }
  </style>

  <!-- å¼•å…¥ Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- å¼•å…¥ Chart.jsï¼Œç”¨äºæ ‘ç§ç»Ÿè®¡å›¾ -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- å¤æ ‘æ•°æ®ï¼švar XA_GUSHU = [...] -->
  <script src="xa_gushu.js"></script>
</head>
<body>
  <div class="layout">
    <!-- å·¦ä¾§æ§åˆ¶æ  -->
    <aside class="sidebar">
      <div>
        <h1>è¥¿å®‰å¸‚å¤æ ‘åæœ¨</h1>
        <p class="small-text">æ•°æ®æ¥æºï¼šè¥¿å®‰å¸‚åŸå¸‚å¤æ ‘åæœ¨æ¸…å•ï¼ˆåæ ‡ç³»ï¼šWGS84ï¼Œå¯¹æ¥ OpenStreetMapï¼‰ã€‚</p>
        <span id="treeCountTag">å…± 0 æ ª</span>
      </div>
      
      <!-- æœç´¢ -->
      <div>
        <h2>ğŸ” æœç´¢å¤æ ‘</h2>
        <input id="searchBox" type="text" placeholder="æŒ‰æ ‘ç§ã€ä½ç½®ã€ç®¡æŠ¤å•ä½ç­‰å…³é”®å­—æœç´¢" />
      </div>

      <!-- æ ‘é¾„ç­›é€‰ -->
      <div>
        <h2>ğŸŒ± æŒ‰æ ‘é¾„ç­›é€‰</h2>
        <input type="range" id="ageMin" min="0" max="1000" value="0" />
        <input type="range" id="ageMax" min="0" max="1000" value="1000" />
      </div>

      <!-- æ ‘ç§ç»Ÿè®¡å›¾ -->
      <div>
        <h2>ğŸ“Š æ ‘ç§ç»„æˆ</h2>
        <div class="chart-card">
          <canvas id="speciesChart" height="120" width="250"></canvas> <!-- è®¾ç½®å›¾è¡¨é«˜åº¦ä¸º120pxï¼Œå®½åº¦ä¸º250px -->
          <div class="legend">ç»Ÿè®¡çš„æ˜¯å¤æ ‘æ•°é‡å‰è‹¥å¹²çš„æ ‘ç§ï¼Œå…¶ä½™åˆå¹¶ä¸ºâ€œå…¶å®ƒæ ‘ç§â€ã€‚é¢œè‰²ä½¿ç”¨ä¸€ç»„æŸ”å’Œçš„è«å…°è¿ªè‰²ã€‚</div>
        </div>
      </div>
    </aside>

    <!-- å³ä¾§åœ°å›¾ -->
    <main id="map"></main>
  </div>

  <script>
    // åˆå§‹åŒ– Leaflet åœ°å›¾å’Œå…¶ä»–åŠŸèƒ½ä»£ç 
  </script>
</body>
</html>

